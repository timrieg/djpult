<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DJ Pult</title>
  <script>
    let currentAudio = null;
    let volumeLevel = 1.0;

    function playAudio(file) {
      if (currentAudio) {
        currentAudio.pause();
      }
      currentAudio = new Audio(file);
      currentAudio.volume = volumeLevel;
      currentAudio.play();
    }

    function stopAudio() {
        if (currentAudio) {
            let fadeOutTime = 2000; // 3 Sekunden
            let fadeSteps = 30; // Anzahl der Schritte f√ºr das Fading
            let fadeInterval = fadeOutTime / fadeSteps;
            let volumeStep = currentAudio.volume / fadeSteps;

            let fadeOut = setInterval(function () {
                if (currentAudio.volume > volumeStep) {
                    currentAudio.volume -= volumeStep;
                } else {
                    clearInterval(fadeOut);
                    currentAudio.pause();
                    currentAudio = null;
                }
            }, fadeInterval);
        }
    }

    function setVolume(value) {
      volumeLevel = value;
      if (currentAudio) {
        currentAudio.volume = volumeLevel;
      }
    }
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="flex h-screen bg-gray-900 text-white">
  <!-- Left section (3/4 of screen) -->
  <div class="w-3/4 flex flex-col p-6">
    <h1 class="text-3xl font-bold mb-6 text-center">DJ Pult</h1>

    <!-- Song Categories -->
    <div class="grid grid-cols-3 gap-4 w-full">
      <!-- Ass/Angriff -->
      <div>
        <h2 class="text-xl font-bold mb-2 text-center">Ass/Angriff</h2>
        <div class="flex flex-col space-y-2">
          {% for song in categories.ass_angriff %}
          <button onclick="playAudio('static/music/{{ song.name }}')"
            class="px-8 py-4 text-lg rounded-lg hover:opacity-80 w-full bg-blue-600">
            {{ song.icon }} {{ song.display_name }}
          </button>
          {% endfor %}
        </div>
      </div>



      <!-- Gegner und Block (halbiert) -->
      <div class="flex flex-col">
        <div>
          <h2 class="text-xl font-bold mb-2 text-center">Gegner</h2>
          <div class="flex flex-col space-y-2">
            {% for song in categories.gegner %}
            <button onclick="playAudio('static/music/{{ song.name }}')"
              class="px-8 py-4 text-lg rounded-lg hover:opacity-80 w-full bg-red-600">
              {{ song.icon }} {{ song.display_name }}
            </button>
            {% endfor %}
          </div>
        </div>

        <div class="mt-6">
          <h2 class="text-xl font-bold mb-2 text-center">Block</h2>
          <div class="flex flex-col space-y-2">
            {% for song in categories.block %}
            <button onclick="playAudio('static/music/{{ song.name }}')"
              class="px-8 py-4 text-lg rounded-lg hover:opacity-80 w-full bg-yellow-600">
              {{ song.icon }} {{ song.display_name }}
            </button>
            {% endfor %}
          </div>
        </div>
      </div>

      <!-- Sonstiges -->
      <div>
        <h2 class="text-xl font-bold mb-2 text-center">Sonstiges</h2>
        <div class="flex flex-col space-y-2">
          {% for song in categories.sonstiges %}
          <button onclick="playAudio('static/music/{{ song.name }}')"
            class="px-8 py-4 text-lg rounded-lg hover:opacity-80 w-full bg-green-600">
            {{ song.icon }} {{ song.display_name }}
          </button>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  <!-- Right section (1/8 of screen) -->
  <div class="w-1/4 flex flex-col items-center justify-center bg-gray-800 p-4">
    <!-- Timeout & Walk-On at Bottom -->
    <div class="flex justify-between mt-6 absolute top-0">
      <button onclick="playAudio('static/special_music/{{ timeout_song }}')"
        class="px-10 py-4 bg-yellow-500 rounded-lg hover:bg-yellow-700 text-xl w-1/2 mr-2">
        Timeout ‚è≥
      </button>
      <button onclick="playAudio('static/special_music/{{ walkon_song }}')"
        class="px-10 py-4 bg-blue-500 rounded-lg hover:bg-blue-700 text-xl w-1/2 ml-2">
        Walk-On üé§
      </button>
    </div>

    <div class="mt-6 flex flex-col items-center">
      <button onclick="stopAudio()" class="mb-4 px-20 py-20 bg-red-600 rounded-lg hover:bg-red-800 text-lg w-full">
        Stop ‚èπ
      </button>
    </div>

    <!-- Vertical Volume Control -->
    <div class="mt-6 flex flex-col items-center absolute bottom-0 h-40">
      <label for="volume" class="block mb-2 text-lg">üîä</label>
      <input type="range" id="volume" min="0" max="1" step="0.05" value="1.0" class="horizontal-slider"
        oninput="setVolume(this.value)">
    </div>

  </div>
</body>

</html>